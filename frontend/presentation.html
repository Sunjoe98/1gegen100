<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>1 gegen 100 – Präsentation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Die Wand</h1>

    <div class="card">
      <div class="row">
        <span class="badge">Im Spiel: <span id="aliveCount">0</span>/<span id="totalCount">0</span></span>
        <span class="badge">Phase: <span id="phaseText">lobby</span></span>
        <span class="badge">Solo: #<span id="soloNum">–</span></span>
      </div>

      <!-- Themenwahl -->
      <div id="topicPanel" style="margin-top:12px;">
        <h2>Wähle ein Thema</h2>
        <div id="topicsGrid" class="grid topics"></div>
        <div class="footer">Einzelspieler wählt, Admin bestätigt.</div>
      </div>

      <!-- Frage/Timer -->
      <div id="questionPanel" style="display:none;margin-top:12px;">
        <div class="footer">Thema: <b><span id="topicName">–</span></b></div>
        <h2 id="qText">–</h2>
        <div id="ansList" class="answers"></div>
        <div class="footer">Mob-Timer</div>
        <div class="timerBar"><div id="mobFill" class="timerFill"></div></div>
        <div class="footer">Einzelspieler (#<span id="soloDisp">–</span>) – kein Zeitlimit. <span id="soloLocked" class="badge" style="display:none;">Antwort gespeichert</span></div>
      </div>

      <!-- Grid -->
      <div id="gridPanel" style="margin-top:16px;">
        <div id="grid" class="grid auto"></div>
      </div>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"></script>
  <script>
    const SOCKET_URL = 'https://onegegen100-u6h7.onrender.com'; // anpassen
    const socket = io(SOCKET_URL);

    let cells = new Map(); let known = new Set();
    let revealInProgress = false; let revealingSet = new Set();

    function setPhase(p){ document.getElementById('phaseText').innerText=p; }
    function show(id,b=true){ document.getElementById(id).style.display=b?'block':'none'; }

    function ensureCells(players) {
      const grid = document.getElementById('grid');
      const nums = players.map(p=>p.number).sort((a,b)=>a-b);
      nums.forEach(n=>{
        if(!known.has(n)){
          const d=document.createElement('div'); d.className='cell alive'; d.textContent=n;
          grid.appendChild(d); cells.set(n,d); known.add(n);
        }
      });
      if(!revealInProgress){
        players.forEach(p=>{
